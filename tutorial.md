# Step-by-step Formatting and Validation guide
---
To practice with this tutorial, you can download the test data from [here](https://github.com/EBISPOT/gwas-sumstats-tools-Documentation/tree/main/test_data). Feel free to experiment and explore!

## Formatting GWAS Summary Statistic Files

#### Step 1: 
- **Determine if your input file is larger than 2GB or if you have more than one file to format.**
  
  - If yes, please install our command line interface (CLI) by following these [instructions](install) and then proceed to Step 2.
  - If no, consider using the online interface [SSF-morph](https://ebispot.github.io/gwas-sumstats-tools-ssf-morph/) for formatting. To learn how to modify the configuration, please refer to the instructions provided [here](edit_config).
  
  > [!NOTE|style:callout]
  > Please note that the command line tool allows formatting and validation of single or multiple files of any size.


#### Step 2: 
- **Identify if your GWAS summary statistics data is generated by `REGENIE`, `BOLT-LMM`, `SAIGE`, or `SNPTEST`.**
  - If yes, use the following command to apply a pre-defined configuration for the specified software (replace `"REGENIE"` in the code example with your chosen software if you are using one of the others):
    ```bash
    gwas-ssf format gwas_sumstats.tsv  --apply_config --analysis_software "REGENIE" -o gwas_sumstats_formatted.tsv
    ```
  - If no, proceed to Step 3.


#### Step 3: 
- **Generate a configuration file based on one input file.**
   ```bash
    gwas-ssf format gwas_sumstats.tsv --generate_config --config_out gwas_sumstats.json --delimiter "\t" --remove_comments "#" 
  ```


#### Step 4: 
- **Edit the configuration file.**
   - Please refer to this [resource](edit_config) for detailed instructions on how to modify configuration.


#### Step 5: 
- **Test the configuration file on the selected input file.**
   ```bash
   gwas-ssf format gwas_sumstats.tsv --test_config  --config_in gwas_sumstats.json
   ```

#### Step 6: 
- **Determine if you plan to batch process multiple input files.**
  - If yes, proceed to Step 7.
  - If no, use the following command to apply the configuration to a single input file:
     ```bash
     gwas-ssf format gwas_sumstats.tsv --apply_config  --config_in gwas_sumstats.json -o gwas_sumstats_formatted.tsv
     ```


#### Step 7: 
- **Decide if you plan to submit jobs on high performance computing (we support LSF or Slurm now).**
  - If yes, use the following command to submit jobs using Slurm  (or replace `--slurm` with `--lsf` to use LSF):
  ```bash
  gwas-ssf format to_format_list.tsv --apply_config --batch_apply --config_in gwas_sumstats.json --slurm
  ```
  - If no, you can contact us for assistance or submit one job to process all your input files.


## Validating GWAS Summary Statistic Files
#### Step 1: 
- **Determine if the file you want to validate is larger than 2GB or if you have more than one file to validate.**
   - If yes, please install our command line interface (CLI) by following these [instructions](install) and then proceed to Step 2.
   - If no, consider using the online interface [SSF-morph](https://ebispot.github.io/gwas-sumstats-tools-ssf-morph/) to validate your file.

#### Step 2:
- **Determine if you have any special requirements for validation (i.e. to test a file with fewer than the normal minimum of 100,000 rows or with zero p_value).**
   - If yes, please refer to the [validation page](CLI_validate) for all available options.
   - If no, please use the following command to display all validation information.
     ```bash
     gwas-ssf validate formatted_gwas_sumstats.tsv -e
     ```

----
Copyright Â© EMBL-EBI 2024 | EMBL-EBI is an Outstation of the [European Molecular Biology Laboratory](https://www.embl.org/) | [Terms of use](https://www.ebi.ac.uk/about/terms-of-use) | [Data Preservation Statement](https://www.ebi.ac.uk/long-term-data-preservation)
